#!/bin/bash

declare -x TRAEFIK_ACCESS_LOGS
[[ -z "${TRAEFIK_ACCESS_LOGS}" ]] && TRAEFIK_ACCESS_LOGS="/dev/stdout"

declare -x TRAEFIK_ACME_ENABLED
[[ -z "${TRAEFIK_ACME_ENABLED}" ]] && TRAEFIK_ACME_ENABLED="false"

declare -x TRAEFIK_ACME_LOGGING
[[ -z "${TRAEFIK_ACME_LOGGING}" ]] && TRAEFIK_ACME_LOGGING="false"

declare -x TRAEFIK_ACME_DELAYDONTCHECKDNS
[[ -z "${TRAEFIK_ACME_DELAYDONTCHECKDNS}" ]] && TRAEFIK_ACME_DELAYDONTCHECKDNS="0"

declare -x TRAEFIK_ACME_ONDEMAND
[[ -z "${TRAEFIK_ACME_ONDEMAND}" ]] && TRAEFIK_ACME_ONDEMAND="false"

declare -x TRAEFIK_ACME_ONHOSTRULE
[[ -z "${TRAEFIK_ACME_ONHOSTRULE}" ]] && TRAEFIK_ACME_ONHOSTRULE="false"

declare -x TRAEFIK_ACME_STORAGE
[[ -z "${TRAEFIK_ACME_STORAGE}" ]] && TRAEFIK_ACME_STORAGE="/etc/acme.json"

declare -x TRAEFIK_BOLTDB_ENABLED
[[ -z "${TRAEFIK_BOLTDB_ENABLED}" ]] && TRAEFIK_BOLTDB_ENABLED="false"

declare -x TRAEFIK_BOLTDB_ENDPOINT
[[ -z "${TRAEFIK_BOLTDB_ENDPOINT}" ]] && TRAEFIK_BOLTDB_ENDPOINT="127.0.0.1:4001"

declare -x TRAEFIK_BOLTDB_PREFIX
[[ -z "${TRAEFIK_BOLTDB_PREFIX}" ]] && TRAEFIK_BOLTDB_PREFIX="/traefik"

declare -x TRAEFIK_BOLTDB_WATCH
[[ -z "${TRAEFIK_BOLTDB_WATCH}" ]] && TRAEFIK_BOLTDB_WATCH="true"

declare -x TRAEFIK_BOLTDB_SKIPVERIFY
[[ -z "${TRAEFIK_BOLTDB_SKIPVERIFY}" ]] && TRAEFIK_BOLTDB_SKIPVERIFY="false"

declare -x TRAEFIK_CLUSTER_ENABLED
[[ -z "${TRAEFIK_CLUSTER_ENABLED}" ]] && TRAEFIK_CLUSTER_ENABLED="false"

declare -x TRAEFIK_CONFIG_FILE
[[ -z "${TRAEFIK_CONFIG_FILE}" ]] && TRAEFIK_CONFIG_FILE="/etc/traefik.toml"

declare -x TRAEFIK_CONSUL_ENABLED
[[ -z "${TRAEFIK_CONSUL_ENABLED}" ]] && TRAEFIK_CONSUL_ENABLED="false"

declare -x TRAEFIK_CONSUL_ENDPOINT
[[ -z "${TRAEFIK_CONSUL_ENDPOINT}" ]] && TRAEFIK_CONSUL_ENDPOINT="127.0.0.1:8500"

declare -x TRAEFIK_CONSUL_PREFIX
[[ -z "${TRAEFIK_CONSUL_PREFIX}" ]] && TRAEFIK_CONSUL_PREFIX="/traefik"

declare -x TRAEFIK_CONSUL_SKIPVERIFY
[[ -z "${TRAEFIK_CONSUL_SKIPVERIFY}" ]] && TRAEFIK_CONSUL_SKIPVERIFY="false"

declare -x TRAEFIK_CONSUL_WATCH
[[ -z "${TRAEFIK_CONSUL_WATCH}" ]] && TRAEFIK_CONSUL_WATCH="true"

declare -x TRAEFIK_CONSULCATALOG_ENABLED
[[ -z "${TRAEFIK_CONSULCATALOG_ENABLED}" ]] && TRAEFIK_CONSULCATALOG_ENABLED="false"

declare -x TRAEFIK_CONSULCATALOG_ENDPOINT
[[ -z "${TRAEFIK_CONSULCATALOG_ENDPOINT}" ]] && TRAEFIK_CONSULCATALOG_ENDPOINT="127.0.0.1:8500"

declare -x TRAEFIK_CONSULCATALOG_WATCH
[[ -z "${TRAEFIK_CONSULCATALOG_WATCH}" ]] && TRAEFIK_CONSULCATALOG_WATCH="true"

declare -x TRAEFIK_DEBUG
[[ -z "${TRAEFIK_DEBUG}" ]] && TRAEFIK_DEBUG="false"

declare -x TRAEFIK_DOCKER_ENABLED
[[ -z "${TRAEFIK_DOCKER_ENABLED}" ]] && TRAEFIK_DOCKER_ENABLED="false"

declare -x TRAEFIK_DOCKER_ENDPOINT
[[ -z "${TRAEFIK_DOCKER_ENDPOINT}" ]] && TRAEFIK_DOCKER_ENDPOINT="unix:///var/run/docker.sock"

declare -x TRAEFIK_DOCKER_EXPOSED
[[ -z "${TRAEFIK_DOCKER_EXPOSED}" ]] && TRAEFIK_DOCKER_EXPOSED="true"

declare -x TRAEFIK_DOCKER_SWARM
[[ -z "${TRAEFIK_DOCKER_SWARM}" ]] && TRAEFIK_DOCKER_SWARM="false"

declare -x TRAEFIK_DOCKER_SKIPVERIFY
[[ -z "${TRAEFIK_DOCKER_SKIPVERIFY}" ]] && TRAEFIK_DOCKER_SKIPVERIFY="false"

declare -x TRAEFIK_DOCKER_USEBINDPORTIP
[[ -z "${TRAEFIK_DOCKER_USEBINDPORTIP}" ]] && TRAEFIK_DOCKER_USEBINDPORTIP="false"

declare -x TRAEFIK_DOCKER_WATCH
[[ -z "${TRAEFIK_DOCKER_WATCH}" ]] && TRAEFIK_DOCKER_WATCH="true"

declare -x TRAEFIK_ETCD_ENABLED
[[ -z "${TRAEFIK_ETCD_ENABLED}" ]] && TRAEFIK_ETCD_ENABLED="false"

declare -x TRAEFIK_ETCD_ENDPOINT
[[ -z "${TRAEFIK_ETCD_ENDPOINT}" ]] && TRAEFIK_ETCD_ENDPOINT="127.0.0.1:4001"

declare -x TRAEFIK_ETCD_PREFIX
[[ -z "${TRAEFIK_ETCD_PREFIX}" ]] && TRAEFIK_ETCD_PREFIX="/traefik"

declare -x TRAEFIK_ETCD_SKIPVERIFY
[[ -z "${TRAEFIK_ETCD_SKIPVERIFY}" ]] && TRAEFIK_ETCD_SKIPVERIFY="false"

declare -x TRAEFIK_ETCD_WATCH
[[ -z "${TRAEFIK_ETCD_WATCH}" ]] && TRAEFIK_ETCD_WATCH="true"

declare -x TRAEFIK_EUREKA_ENABLED
[[ -z "${TRAEFIK_EUREKA_ENABLED}" ]] && TRAEFIK_EUREKA_ENABLED="false"

declare -x TRAEFIK_EUREKA_WATCH
[[ -z "${TRAEFIK_EUREKA_WATCH}" ]] && TRAEFIK_EUREKA_WATCH="true"

declare -x TRAEFIK_FILE_ENABLED
[[ -z "${TRAEFIK_FILE_ENABLED}" ]] && TRAEFIK_FILE_ENABLED="false"

declare -x TRAEFIK_FILE_WATCH
[[ -z "${TRAEFIK_FILE_WATCH}" ]] && TRAEFIK_FILE_WATCH="true"

declare -x TRAEFIK_GRACE_TIMEOUT
[[ -z "${TRAEFIK_GRACE_TIMEOUT}" ]] && TRAEFIK_GRACE_TIMEOUT="10"

declare -x TRAEFIK_SKIPVERIFY
[[ -z "${TRAEFIK_SKIPVERIFY}" ]] && TRAEFIK_SKIPVERIFY="false"

declare -x TRAEFIK_KUBERNETES_ENABLED
[[ -z "${TRAEFIK_KUBERNETES_ENABLED}" ]] && TRAEFIK_KUBERNETES_ENABLED="false"

declare -x TRAEFIK_KUBERNETES_DISABLEPASSHOSTHEADER
[[ -z "${TRAEFIK_KUBERNETES_DISABLEPASSHOSTHEADER}" ]] && TRAEFIK_KUBERNETES_DISABLEPASSHOSTHEADER="false"

declare -x TRAEFIK_KUBERNETES_WATCH
[[ -z "${TRAEFIK_KUBERNETES_WATCH}" ]] && TRAEFIK_KUBERNETES_WATCH="true"

declare -x TRAEFIK_LOG_LEVEL
[[ -z "${TRAEFIK_LOG_LEVEL}" ]] && TRAEFIK_LOG_LEVEL="ERROR"

declare -x TRAEFIK_MARATHON_ENABLED
[[ -z "${TRAEFIK_MARATHON_ENABLED}" ]] && TRAEFIK_MARATHON_ENABLED="false"

declare -x TRAEFIK_MARATHON_DIALERTIMEOUT
[[ -z "${TRAEFIK_MARATHON_DIALERTIMEOUT}" ]] && TRAEFIK_MARATHON_DIALERTIMEOUT="60ns"

declare -x TRAEFIK_MARATHON_ENDPOINT
[[ -z "${TRAEFIK_MARATHON_ENDPOINT}" ]] && TRAEFIK_MARATHON_ENDPOINT="http://127.0.0.1:8080"

declare -x TRAEFIK_MARATHON_EXPOSED
[[ -z "${TRAEFIK_MARATHON_EXPOSED}" ]] && TRAEFIK_MARATHON_EXPOSED="true"

declare -x TRAEFIK_MARATHON_GROUPSASSUBDOMAINS
[[ -z "${TRAEFIK_MARATHON_GROUPSASSUBDOMAINS}" ]] && TRAEFIK_MARATHON_GROUPSASSUBDOMAINS="false"

declare -x TRAEFIK_MARATHON_KEEPALIVE
[[ -z "${TRAEFIK_MARATHON_KEEPALIVE}" ]] && TRAEFIK_MARATHON_KEEPALIVE="10ns"

declare -x TRAEFIK_MARATHON_LBCOMPATIBILITY
[[ -z "${TRAEFIK_MARATHON_LBCOMPATIBILITY}" ]] && TRAEFIK_MARATHON_LBCOMPATIBILITY="false"

declare -x TRAEFIK_MARATHON_WATCH
[[ -z "${TRAEFIK_MARATHON_WATCH}" ]] && TRAEFIK_MARATHON_WATCH="true"

declare -x TRAEFIK_MAX_IDLECONNS
[[ -z "${TRAEFIK_MAX_IDLECONNS}" ]] && TRAEFIK_MAX_IDLECONNS="200"

declare -x TRAEFIK_MESOS_ENABLED
[[ -z "${TRAEFIK_MESOS_ENABLED}" ]] && TRAEFIK_MESOS_ENABLED="false"

declare -x TRAEFIK_MESOS_ENDPOINT
[[ -z "${TRAEFIK_MESOS_ENDPOINT}" ]] && TRAEFIK_MESOS_ENDPOINT="http://127.0.0.1:5050"

declare -x TRAEFIK_MESOS_EXPOSED
[[ -z "${TRAEFIK_MESOS_EXPOSED}" ]] && TRAEFIK_MESOS_EXPOSED="true"

declare -x TRAEFIK_MESOS_GROUPSASSUBDOMAINS
[[ -z "${TRAEFIK_MESOS_GROUPSASSUBDOMAINS}" ]] && TRAEFIK_MESOS_GROUPSASSUBDOMAINS="false"

declare -x TRAEFIK_MESOS_REFRESHSECONDS
[[ -z "${TRAEFIK_MESOS_REFRESHSECONDS}" ]] && TRAEFIK_MESOS_REFRESHSECONDS="0"

declare -x TRAEFIK_MESOS_STATETIMEOUTSECOND
[[ -z "${TRAEFIK_MESOS_STATETIMEOUTSECOND}" ]] && TRAEFIK_MESOS_STATETIMEOUTSECOND="0"

declare -x TRAEFIK_MESOS_WATCH
[[ -z "${TRAEFIK_MESOS_WATCH}" ]] && TRAEFIK_MESOS_WATCH="true"

declare -x TRAEFIK_MESOS_ZKDETECTIONTIMEOUT
[[ -z "${TRAEFIK_MESOS_ZKDETECTIONTIMEOUT}" ]] && TRAEFIK_MESOS_ZKDETECTIONTIMEOUT="0"

declare -x TRAEFIK_THROTTLE_DURATION
[[ -z "${TRAEFIK_THROTTLE_DURATION}" ]] && TRAEFIK_THROTTLE_DURATION="2s"

declare -x TRAEFIK_RETRY_ENABLED
[[ -z "${TRAEFIK_RETRY_ENABLED}" ]] && TRAEFIK_RETRY_ENABLED="true"

declare -x TRAEFIK_RETRY_ATTEMPTS
[[ -z "${TRAEFIK_RETRY_ATTEMPTS}" ]] && TRAEFIK_RETRY_ATTEMPTS="0"

declare -x TRAEFIK_DAEMON_LOGS
[[ -z "${TRAEFIK_DAEMON_LOGS}" ]] && TRAEFIK_DAEMON_LOGS="/dev/stdout"

declare -x TRAEFIK_WEB_ENABLED
[[ -z "${TRAEFIK_WEB_ENABLED}" ]] && TRAEFIK_WEB_ENABLED="true"

declare -x TRAEFIK_WEB_ADDRESS
[[ -z "${TRAEFIK_WEB_ADDRESS}" ]] && TRAEFIK_WEB_ADDRESS=":8080"

declare -x TRAEFIK_WEB_READONLY
[[ -z "${TRAEFIK_WEB_READONLY}" ]] && TRAEFIK_WEB_READONLY="false"

declare -x TRAEFIK_WEB_STATISTICS
[[ -z "${TRAEFIK_WEB_STATISTICS}" ]] && TRAEFIK_WEB_STATISTICS="false"

declare -x TRAEFIK_WEB_STATISTICS_ERRORS
[[ -z "${TRAEFIK_WEB_STATISTICS_ERRORS}" ]] && TRAEFIK_WEB_STATISTICS_ERRORS="10"

declare -x TRAEFIK_ZOOKEEPER_ENABLED
[[ -z "${TRAEFIK_ZOOKEEPER_ENABLED}" ]] && TRAEFIK_ZOOKEEPER_ENABLED="false"

[[ -z "${TRAEFIK_ZOOKEEPER_ENDPOINT}" ]] && TRAEFIK_ZOOKEEPER_ENDPOINT="127.0.0.1:2181"
declare -x TRAEFIK_ZOOKEEPER_ENDPOINT

[[ -z "${TRAEFIK_ZOOKEEPER_PREFIX}" ]] && TRAEFIK_ZOOKEEPER_PREFIX="/traefik"
declare -x TRAEFIK_ZOOKEEPER_PREFIX

[[ -z "${TRAEFIK_ZOOKEEPER_WATCH}" ]] && TRAEFIK_ZOOKEEPER_WATCH="true"
declare -x TRAEFIK_ZOOKEEPER_WATCH

if [ -n "${TRAEFIK_BOLTDB_CA}" ]
then
  if [ ! -f "${TRAEFIK_BOLTDB_CA}" ]
  then
    echo -e "${TRAEFIK_BOLTDB_CA}" >| /tmp/boltdb.ca
    TRAEFIK_BOLTDB_CA="/tmp/boltdb.ca"
  fi
fi

if [ -n "${TRAEFIK_BOLTDB_CERT}" ]
then
  if [ ! -f "${TRAEFIK_BOLTDB_CERT}" ]
  then
    echo -e "${TRAEFIK_BOLTDB_CERT}" >| /tmp/boltdb.crt
    TRAEFIK_BOLTDB_CERT="/tmp/boltdb.crt"
  fi
fi

if [ -n "${TRAEFIK_BOLTDB_KEY}" ]
then
  if [ ! -f "${TRAEFIK_BOLTDB_KEY}" ]
  then
    echo -e "${TRAEFIK_BOLTDB_KEY}" >| /tmp/boltdb.key
    TRAEFIK_BOLTDB_KEY="/tmp/boltdb.key"
  fi
fi

if [ -n "${TRAEFIK_CONSUL_CA}" ]
then
  if [ ! -f "${TRAEFIK_CONSUL_CA}" ]
  then
    echo -e "${TRAEFIK_CONSUL_CA}" >| /tmp/consul.ca
    TRAEFIK_CONSUL_CA="/tmp/consul.ca"
  fi
fi

if [ -n "${TRAEFIK_CONSUL_CERT}" ]
then
  if [ ! -f "${TRAEFIK_CONSUL_CERT}" ]
  then
    echo -e "${TRAEFIK_CONSUL_CERT}" >| /tmp/consul.crt
    TRAEFIK_CONSUL_CERT="/tmp/consul.crt"
  fi
fi

if [ -n "${TRAEFIK_CONSUL_KEY}" ]
then
  if [ ! -f "${TRAEFIK_CONSUL_KEY}" ]
  then
    echo -e "${TRAEFIK_CONSUL_KEY}" >| /tmp/consul.key
    TRAEFIK_CONSUL_KEY="/tmp/consul.key"
  fi
fi

if [ -n "${TRAEFIK_DOCKER_CA}" ]
then
  if [ ! -f "${TRAEFIK_DOCKER_CA}" ]
  then
    echo -e "${TRAEFIK_DOCKER_CA}" >| /tmp/docker.ca
    TRAEFIK_DOCKER_CA="/tmp/docker.ca"
  fi
fi

if [ -n "${TRAEFIK_DOCKER_CERT}" ]
then
  if [ ! -f "${TRAEFIK_DOCKER_CERT}" ]
  then
    echo -e "${TRAEFIK_DOCKER_CERT}" >| /tmp/docker.crt
    TRAEFIK_DOCKER_CERT="/tmp/docker.crt"
  fi
fi

if [ -n "${TRAEFIK_DOCKER_KEY}" ]
then
  if [ ! -f "${TRAEFIK_DOCKER_KEY}" ]
  then
    echo -e "${TRAEFIK_DOCKER_KEY}" >| /tmp/docker.key
    TRAEFIK_DOCKER_KEY="/tmp/docker.key"
  fi
fi

if [ -n "${TRAEFIK_ETCD_CA}" ]
then
  if [ ! -f "${TRAEFIK_ETCD_CA}" ]
  then
    echo -e "${TRAEFIK_ETCD_CA}" >| /tmp/etcd.ca
    TRAEFIK_ETCD_CA="/tmp/etcd.ca"
  fi
fi

if [ -n "${TRAEFIK_ETCD_CERT}" ]
then
  if [ ! -f "${TRAEFIK_ETCD_CERT}" ]
  then
    echo -e "${TRAEFIK_ETCD_CERT}" >| /tmp/etcd.crt
    TRAEFIK_ETCD_CERT="/tmp/etcd.crt"
  fi
fi

if [ -n "${TRAEFIK_ETCD_KEY}" ]
then
  if [ ! -f "${TRAEFIK_ETCD_KEY}" ]
  then
    echo -e "${TRAEFIK_ETCD_KEY}" >| /tmp/etcd.key
    TRAEFIK_ETCD_KEY="/tmp/etcd.key"
  fi
fi

if [ -n "${TRAEFIK_MARATHON_CA}" ]
then
  if [ ! -f "${TRAEFIK_MARATHON_CA}" ]
  then
    echo -e "${TRAEFIK_MARATHON_CA}" >| /tmp/marathon.ca
    TRAEFIK_MARATHON_CA="/tmp/marathon.ca"
  fi
fi

if [ -n "${TRAEFIK_MARATHON_CERT}" ]
then
  if [ ! -f "${TRAEFIK_MARATHON_CERT}" ]
  then
    echo -e "${TRAEFIK_MARATHON_CERT}" >| /tmp/marathon.crt
    TRAEFIK_MARATHON_CERT="/tmp/marathon.crt"
  fi
fi

if [ -n "${TRAEFIK_MARATHON_KEY}" ]
then
  if [ ! -f "${TRAEFIK_MARATHON_KEY}" ]
  then
    echo -e "${TRAEFIK_MARATHON_KEY}" >| /tmp/marathon.key
    TRAEFIK_MARATHON_KEY="/tmp/marathon.key"
  fi
fi

if [ -n "${TRAEFIK_WEB_CERT}" ]
then
  if [ ! -f "${TRAEFIK_WEB_CERT}" ]
  then
    echo -e "${TRAEFIK_WEB_CERT}" >| /tmp/web.crt
    TRAEFIK_WEB_CERT="/tmp/web.crt"
  fi
fi

if [ -n "${TRAEFIK_WEB_KEY}" ]
then
  if [ ! -f "${TRAEFIK_WEB_KEY}" ]
  then
    echo -e "${TRAEFIK_WEB_KEY}" >| /tmp/web.key
    TRAEFIK_WEB_KEY="/tmp/web.key"
  fi
fi

if [ -n "${TRAEFIK_ZOOKEEPER_CA}" ]
then
  if [ ! -f "${TRAEFIK_ZOOKEEPER_CA}" ]
  then
    echo -e "${TRAEFIK_ZOOKEEPER_CA}" >| /tmp/zookeeper.ca
    TRAEFIK_ZOOKEEPER_CA="/tmp/zookeeper.ca"
  fi
fi

if [ -n "${TRAEFIK_ZOOKEEPER_CERT}" ]
then
  if [ ! -f "${TRAEFIK_ZOOKEEPER_CERT}" ]
  then
    echo -e "${TRAEFIK_ZOOKEEPER_CERT}" >| /tmp/zookeeper.crt
    TRAEFIK_ZOOKEEPER_CERT="/tmp/zookeeper.crt"
  fi
fi

if [ -n "${TRAEFIK_ZOOKEEPER_KEY}" ]
then
  if [ ! -f "${TRAEFIK_ZOOKEEPER_KEY}" ]
  then
    echo -e "${TRAEFIK_ZOOKEEPER_KEY}" >| /tmp/zookeeper.key
    TRAEFIK_ZOOKEEPER_KEY="/tmp/zookeeper.key"
  fi
fi

if [[ "${TRAEFIK_ETCD_ENABLED}" == "true" ]]
then
  CMD="/usr/bin/curl -s -L"

  if [[ -n "${TRAEFIK_ETCD_CA}" || -n "${TRAEFIK_ETCD_CERT}" || -n "${TRAEFIK_ETCD_KEY}" ]]
  then
    [[ -n "${TRAEFIK_ETCD_CA}" ]] && CMD="${CMD} --cacert ${TRAEFIK_ETCD_CA}"
    [[ -n "${TRAEFIK_ETCD_CERT}" ]] && CMD="${CMD} --cert ${TRAEFIK_ETCD_CERT}"
    [[ -n "${TRAEFIK_ETCD_KEY}" ]] && CMD="${CMD} --key ${TRAEFIK_ETCD_KEY}"

    CMD="${CMD} https://${TRAEFIK_ETCD_ENDPOINT}/v2/keys${TRAEFIK_ETCD_PREFIX}"
  else
    CMD="${CMD} http://${TRAEFIK_ETCD_ENDPOINT}/v2/keys${TRAEFIK_ETCD_PREFIX}"
  fi

  if ! ${CMD} -X GET | grep -q createdIndex
  then
    ${CMD} -X PUT -d dir=true
  fi
fi

FILES=(
  ${TRAEFIK_BOLTDB_CA}
  ${TRAEFIK_BOLTDB_CERT}
  ${TRAEFIK_BOLTDB_KEY}
  ${TRAEFIK_CONSUL_CA}
  ${TRAEFIK_CONSUL_CERT}
  ${TRAEFIK_CONSUL_KEY}
  ${TRAEFIK_DOCKER_CA}
  ${TRAEFIK_DOCKER_CERT}
  ${TRAEFIK_DOCKER_KEY}
  ${TRAEFIK_ETCD_CA}
  ${TRAEFIK_ETCD_CERT}
  ${TRAEFIK_ETCD_KEY}
  ${TRAEFIK_MARATHON_CA}
  ${TRAEFIK_MARATHON_CERT}
  ${TRAEFIK_MARATHON_KEY}
  ${TRAEFIK_WEB_CERT}
  ${TRAEFIK_WEB_KEY}
  ${TRAEFIK_ZOOKEEPER_CA}
  ${TRAEFIK_ZOOKEEPER_CERT}
  ${TRAEFIK_ZOOKEEPER_KEY}
)

for FILE in ${FILES[@]}
do
  chown -R root:root \
    ${FILE}

  chmod u=rw,g-rwx,o-rwx \
    ${FILE}
done
